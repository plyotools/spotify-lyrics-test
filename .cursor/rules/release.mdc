# Release Command Rules

## Release Command

**To release a project, simply say: "release it" or "release" in the chat.**

The agent will recognize these phrases and follow the release procedure. You can also use `/release` if you prefer, but it's not required - natural language works just as well.

When the user says "release it", "release", or uses `/release`:

1. **Call Control Center**:
   - Execute: `ccc release-project --path <project-path>`
   - This handles all GitHub operations non-interactively

2. **What Happens**:
   - Control Center ensures git repo exists (init if needed)
   - Creates GitHub repository if it doesn't exist
   - Sets up remote origin
   - Pushes code to GitHub
   - Returns repository URL
   - **If suburl provided**: Automatically detects project type, builds if needed, configures GitHub Pages, and deploys site

3. **User Experience**:
   - Show simple confirmation: "Done. Your project is available at: <repo-url>"
   - No authentication prompts
   - No manual configuration needed

4. **Error Handling**:
   - If GitHub auth fails: "GitHub authentication invalid. Please reconfigure Control Center GitHub credentials."
   - If repo creation fails: Show the error from Control Center
   - Never prompt for tokens or credentials

5. **After Release**:
   - Project registry is updated with repo URL
   - `.cursor/control-center.json` is updated
   - Future "ship it" commands will push to this repository
   - **If GitHub Pages deployed**: Site URL is stored and deployment status is tracked

## GitHub Pages Deployment

When releasing with a suburl (via UI dialog):
- Project type is automatically detected (static, needs-build, or dynamic)
- If project needs build, it's built automatically and artifacts are committed
- Build output in `dist/`, `build/`, etc. is copied to root for GitHub Pages
- GitHub Pages is configured with the correct source branch and folder
- Deployment status is monitored and user is notified when site is live
- Site URL format: `https://<owner>.github.io/<suburl>` (suburl becomes the repo name)

## End-to-End Testing Requirement

**CRITICAL**: Before marking any release/deployment feature as complete:
1. **Test with a real project**: Use an actual project (e.g., Spotify Lyrics Player)
2. **Verify the page is live**: Check that `https://<owner>.github.io/<repo>` actually loads
3. **Fix obstacles**: Debug and fix any errors encountered during testing
4. **Show proof**: Provide the actual live URL as proof the deployment worked
5. **Update rules**: Document any issues found and how they were resolved

**Never claim "fixed" or "complete" without:**
- Actually testing the full flow end-to-end
- Verifying the GitHub Pages site is accessible
- Confirming the URL works in a browser
- Showing the actual live URL as proof

## Non-Interactive Flow

The entire release process must be non-interactive:
- Uses centralized GitHub authentication from Control Center
- Uses centralized GitHub configuration (owner, visibility, branch)
- No per-project authentication or configuration needed

### Important Notes:
- **Natural language works perfectly**: Just say "release it" or "release" - no need to create custom commands
- Always use the Control Center command: `ccc release-project --path <project-path>`
- Never prompt for credentials or tokens
- Project registry is automatically updated after successful release
