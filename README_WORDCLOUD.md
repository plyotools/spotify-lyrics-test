# Word Cloud Feature

This project includes a word cloud generator that creates beautiful word clouds from lyrics using colors extracted from album cover art.

## Features

- Generates word clouds from full lyrics text
- Uses colors extracted from album cover art
- Displays as a subtle background behind lyrics
- Fully automated - no manual intervention needed

## Prerequisites

### Python Dependencies

Install the required Python packages:

```bash
pip3 install wordcloud pillow numpy flask flask-cors
```

Or using requirements file:

```bash
pip3 install -r requirements.txt
```

## Setup

### 1. Start the Word Cloud Server

The word cloud is generated by a Python Flask server. Start it before running the app:

```bash
python3 scripts/wordcloud_server.py
```

The server will run on `http://localhost:5000`.

### 2. Run the App

In a separate terminal, start the development server:

```bash
npm run dev
```

The word cloud will automatically generate when lyrics are loaded and display as a background.

## How It Works

1. **Color Extraction**: The app extracts 5 vivid bright colors from the album cover art (already implemented)

2. **Lyrics Text Extraction**: All lyrics text is extracted from the `LyricsData` structure

3. **Word Cloud Generation**: The Python script generates a word cloud using:
   - All lyrics words
   - Colors from album cover art
   - Transparent background
   - Custom styling for optimal appearance

4. **Display**: The word cloud appears as a subtle background layer behind the lyrics

## Manual Generation

You can also generate word clouds manually using the Python script:

```bash
# Generate from text file
python3 scripts/generate_wordcloud.py --lyrics lyrics.txt --colors "#1DB954" "#FFFFFF" "#FF5733" --output wordcloud.png

# Generate from stdin
echo "Your lyrics text here" | python3 scripts/generate_wordcloud.py --colors "#1DB954" "#FFFFFF" --output wordcloud.png

# Generate with JSON colors file
python3 scripts/generate_wordcloud.py --lyrics lyrics.txt --colors-json colors.json --output wordcloud.png
```

## API Endpoint

The Flask server provides a REST API:

**POST** `/api/wordcloud`

Request body:
```json
{
  "lyrics": "Full lyrics text here...",
  "colors": ["#1DB954", "#FFFFFF", "#FF5733"],
  "width": 1920,
  "height": 1080,
  "max_words": 200
}
```

Response:
```json
{
  "success": true,
  "image": "data:image/png;base64,..."
}
```

## Troubleshooting

### Server not running
If the word cloud doesn't appear, check that the Python server is running:
```bash
curl http://localhost:5000/health
```

### CORS errors
The Flask server has CORS enabled. If you encounter CORS issues, ensure the server is running on port 5000 and the app is connecting to `http://localhost:5000`.

### Missing dependencies
Install all required Python packages:
```bash
pip3 install wordcloud pillow numpy flask flask-cors
```

## Customization

You can customize the word cloud appearance by modifying:
- `opacity` in `WordCloudBackground` component (default: 0.08)
- `max_words` in the API call (default: 150)
- `width` and `height` (default: window dimensions)



